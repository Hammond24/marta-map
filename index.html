<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>BDC - MARTA</title>
    <link rel="stylesheet" href="index.css">

  </head>
  <body>
    <img src="marta.png" alt="MARTA Logo" height="100" width="300">
    <div id="map"></div>
    <script>
      function initMap() {
        var georgiaTech = {lat: 33.7756, lng: -84.3963};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: georgiaTech
        });

        var curr_markers = {};
        var infowindow = new google.maps.InfoWindow();

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          // console.log(thsi.status)
          if (this.readyState == 4 && this.status == 200) {
            var buses = JSON.parse(this.responseText);
            var new_markers = {};
            for (var i = 0; i < buses.length; i++) {
	            	var marker = new google.maps.Marker({
	          			position: {lat: parseFloat(buses[i].y), lng: parseFloat(buses[i].x)},
	          			map: map
                });
            }
          }
        };
        xhttp.open("GET", "https://raw.githubusercontent.com/gt-big-data/marta-map/4577d97202c8b9a90911b3de543037cb1ce021f2/temp.json", true);
        xhttp.send();
      // }

      };
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpWRyIAxW2rc8HgZssAWARXef2c7qEGgU&callback=initMap">
  </script>
    </body>
  </html>
